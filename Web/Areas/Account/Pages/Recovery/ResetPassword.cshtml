@page
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using Web.Areas.Account.Pages.Recovery
@using Application.Entities
@model MediatorResetPassword<BlogUser>;

@{
    Layout = "_Layout";
}

@Html.AntiForgeryToken()
 @if (!Model.IsSuccessful)
 {
     <section class="blg-section" style="padding-left: 25px;padding-right: 25px;height: 100vh">
         <div class="blg-child-node col" style="color: #eae7e1;justify-content: center;align-items: center;">

             <form id="resetPasswordForm" method="post" style="width: 270px;">
                 <h3 style="font-weight: lighter;margin-bottom: 12px;">Password Reset</h3>
                 <div style="display: flex;flex-direction: column;gap: 12px;">
                     <div class="group">
                         <span asp-validation-for="Input.Password" style="font-size: 0.6em;"></span>
                         <span asp-validation-for="Input.ResetToken" style="font-size: 0.6em;"></span>
                         <div asp-validation-summary="ModelOnly" style="font-size: 0.6em;"></div>
                     </div>
                     <div class="group">
                         <label>New Password</label>
                         <input asp-for="Input.Password" placeholder="New Password" type="password"/>
                     </div>
                     <div class="group">
                         <label>Confirm Password</label>
                         <input asp-for="Input.ConfirmPassword" placeholder="Confirm Password" type="password"/>
                     </div>
                     <input asp-for="Input.UserId" type="hidden"/>
                     <input asp-for="Input.ResetToken" type="hidden"/>
                     <div class="group">
                         <button id="loginSubmit" type="submit">Reset Password</button>
                     </div>
                 </div>
             </form>
         </div>
     </section>
 }
 else
 {
     <section class="blg-section" style="padding-left: 25px;padding-right: 25px;height: 100vh;margin-top: 25px">
         <div class="blg-child-node col" style="color: #eae7e1;align-items: center;">
             <div style="padding: 15px;border-radius: 50%;display: flex;align-items: center;">
                 <i class="fa-solid fa-check" style="font-size: 2rem;"></i>
             </div>
             <div style="text-align:center;font-size: 1.3rem;"><b>Password Reset Successful</b></div>
                 <br>
                 <p style="max-width:500px;text-align:center;">You can now log in to your account using your new password.</p>
                 <br>
                 <button style="width: 150px;"><a href="/account/login" style="color:inherit;text-decoration: none;">Login</a></button>
         </div>
     </section>
     
 }


@*
@Html.AntiForgeryToken()
<section class="custom-section" style="
            justify-content: center;
            height: 100vh;
            align-items: center;
            flex-direction: column">
    @if (!Model.IsSuccessful)
    {
        <div class="lds-dual-ring" style="display: none;">
            <div></div>
        </div>
        <form id="resetPasswordForm" class="custom-form" style="
            background: var(--white);
            display: flex; 
            align-items: center" method="post">
            <h3>Reset Password.</h3>
            <span class="subtitle">Enter your desired password.</span>
            <span asp-validation-for="Input.Password" style="font-size: 0.6em;"></span>
            <span asp-validation-for="Input.ResetToken" style="font-size: 0.6em;"></span>

            <div class="form-spacer"></div>
            <div class="custom-form-group col">
                <i id="password" class="fa-solid fa-lock custom-input-icon" style="color: var(--blue-light)"></i>
                <input asp-for="Input.Password" onkeyup="checkForMatch()" class="custom-input icon-supp" placeholder="Password" type="password"/>
            </div>
            <div class="custom-form-group col">
                <i id="dynamic_icon_label" class="fa-solid fa-x custom-input-icon" style="color: var(--blue-light)"></i>
                <input asp-for="Input.ConfirmPassword" onkeyup="checkForMatch()" class="custom-input icon-supp" placeholder="Confirm Password" type="password"/>
            </div>
            <input asp-for="Input.UserId" type="hidden"/>
            <input asp-for="Input.ResetToken" type="hidden"/>
            <div class="custom-form-group">
                <button class="custom-button default" id="loginSubmit" type="submit">Reset Password</button>
            </div>
        </form>
    }
    else
    {
        <section class="custom-section" style="
            justify-content: center;
            height: 100vh;
            align-items: center;
            flex-direction: column">
            <div class="custom-form" style="  background: var(--white);
                                      display: flex; 
                                      align-items: center;
                                      width: 500px;
                                      text-align: center">
                <h3>Password successfully reset</h3>
                <p style="padding-top: 3rem;font-size: 0.8em;">You can Log in <a href="/account/login" style="color: var(--blue-light)">here</a></p>
            </div>
        </section>
    }
</section>
*/
@section Scripts {
    <partial name="_ValidationScriptsPartial"/>
}

<script>    
    var password = document.getElementById("Input_Password");
    var confirmpassword = document.getElementById("Input_ConfirmPassword")
    var icon = document.getElementById("dynamic_icon_label")
    
    function checkForMatch(){
        if (password.value === confirmpassword.value) {
            icon.classList.remove("fa-x");
            icon.classList.add("fa-check");
         } else { 
            icon.classList.remove("fa-check");
            icon.classList.add("fa-x");
         }
    }
</script>
*@